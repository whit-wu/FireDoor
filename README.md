# FireDoor
## Description
Firedoor is an open source .NET Framework 4.8 application that allows users to measure the temperature of their CPU's cores without having to manually monitor them.
It was created from a need to ensure that long-term heat would not damage the chip.  The user starts by specifying which resource-intensive application they plan to test.  The user will then have an opportunity to define the max temperature they are willing their CPU cores to reach.  The application specified will then start, and FireDoor will monitor the temperatures in the background.  If a core goes past the maximum temperature specified, FireDoor will exit the test app to help prevent long term heat damage from being done to the CPU.  It should be noted that FireDoor is NOT meant to overclock CPUs; it acts as supplemental software that allows users to safely test their overclocked settings.  FireDoor is able to pull CPU temps by using a library from another open source project, called OpenHardwareMonitor.  
 
## How To Use

1. Open the program and enter the path of the app you wish to test.

2. If your games are tied to a digital provider's launcher, you will be prompted to start the launcher before moving forward.  Please note that FireDoor cannot detect if the launcher is running or not, and will attempt to open your app if you press ENTER without opening the launcher.  In the gif below I am attempting to open DOOM (2016), which is tied to my Steam account.  In the example, my launcher is already open, so I have gone ahead and pressed ENTER.

3. Enter the maximum temperature you are willing a CPU core to reach (in celcius).

4. Wait while FireDoor loads your app.

![HowToUse](./Resources/howToUse.gif)

Firedoor will collect your CPU core temps, then wait 10 seconds.  From there, it will collect the tempratures of each CPU core once every second, until you test app's process is terminated.  Termination is acomplished by manually ending the app's process, or by a CPU core temp exceeding the maximum specified temperature.

When the test app's process has terminated, FireDoor will show a report containing the following information:
- The average temperature per core.
- The reason for the termination.
- (If terminated by program) The core that passed the max temperature and what temperature it was.
- The amount of time the test app ran before its process was terminated.  

Below is a screenshot of the results I get back from FireDoor if my max temp (45 degrees C) is exceeded while running my test app.

![TermByFireDoor](./Resources/TermByFireDoor.jpeg)

I would get a similar screen back if I exited the test app myself, with the only difference being that my Termination Result would say "Process terminated by user".

## Why Use FireDoor?
You may be wondering what makes this app so special if you could simply use OpenHardwareMonitor to help you monitor CPU temps.  After all, FireDoor uses one of its libraries for the purpose of collecting CPU temps, so it must be a sturdy program.  Truth be told, OpenHardware monitor is a fantastic program, but when overclocking it is nice to have a tool that can do the following:    

- Runs in the background so that you can test without manually monitoring your CPU temps.    

- Automatically terminates the program you are testing when you CPU cores become too hot.

- Upon termination of the test program, displays the average temperatures of each core during testing.

If you want a general overview of your hardware temps that you can monitor manaully, use OpenHardwareMonitor. However, if you are looking to find the "sweet spot" clock speed for your CPU that gives you the best performance without frying the chip, then FireDoor may be the best choice for you! 

##  DLLs and Nuget Packages Used
- OpenHardwareMonitorLib: A DLL of OpenHardwareMonitorLib has been included in this app.  It includes methods that allow the developer to 
measure CPU temps.  Unfortunately, no Nuget package for this library was available, which is why the DLL is in source control.  

- Fody and Costura.Fody: Used to include OpenHardwareMonitorLib in any executable (EXE) file generated by building.  This ensures that any EXE pulled from your Debug folder can act as a standalone program.   
 
## FAQ
<strong>What is the app.manifest file for?</strong>
 
The app.manifest file allows Visual Studio to run the code with admin privileges.  Without it, the app is unable to read the temperature of each core.
 
<strong>FireDoor sees more cores on my CPU than I am expecting.  What's the deal?</strong>
 
FireDoor uses a DLL from OpenHardwareMonitor to call libraries that will read the temperature of each logical core (the number of physical cores on your CPU times the amount of threads each core runs).  For example, let's say my CPU has two physical cores, and each core can run two threads.  OpenHardwareMonitor will seem them as four cores when reading CPU core temperatures on my PC.  

<strong>Why is there one ten second delay before temps are collected after each second?</strong>

The delay gives FireDoor the oppurtunity to ensure the process is fully started before collecting temps.  Without it, FireDoor will be unable to locate apps that time time to start, and will believe that the process has already ended. 

<strong>What is FodyWeavers.xml for?</strong>

This file specifies that OpenHardwareMonitorLib is bundled into any EXE generated by a build.  Removing this file will stop this process from happening, meaning that generated EXE files will not be able to be used as standalone programs outside the folder they were created in.

<strong>I see this app is using .NET Framework 4.8.  Why was it not designed to use .NET Core?</strong>

As I said earlier, FireDoor takes advantage of methods from a DLL, called OpenHardwareMonitorLib, to read the temperature of each CPU core.  This library targets .NET 2.0, making it incompatible with .NET Core.

<strong>My app has its own launcher.  How can I move forward with testing? </strong>

At this time, apps with their own launchers are unable to be tested.  I am currently looking into a solution for this.

